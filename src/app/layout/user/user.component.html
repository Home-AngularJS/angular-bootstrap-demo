  <!-- Container: List Items -->
  <div class="container">
    <div class="control-section" style="padding-bottom: 5px;">
      <span style="padding-right: 3px;">
        <button (click)="goBack()" title="Вернуться к предыдущей странице">&#8629;</button>
      </span>
      <span stFilter #stFilter="stFilter" style="padding-right: 3px;">
        <button routerLink="/user" [queryParams]="{}" (click)="stFilter.filter(btnFilter('id=&userLogin=&merchantId=&phoneNumber=&mcc=&merchantLocation=&merchantName=&startRegistrationDate=&endRegistrationDate='))" title="Обновить">&#x21bb;</button>
      </span>
      <button ejs-button id='btnOpenOneCreate' #btnOpenOneCreate (click)="openOneCreate()" title="Регистрация нового пользователя" style="margin-left: 3px">&#10010;</button>

      <ejs-dialog #create id="create"
                  style="display: none;"
                  [isModal]='isModalCreate'
                  [animationSettings]='animationSettings'
                  [showCloseIcon]='showCloseIcon'
                  [target]='".control-section"'
                  [width]='"435px"'
                  (open)="onCreate()"
                  (close)="offCreate()">
        <form [formGroup]="createForm">
          <ng-template #header>
            <div id="dlg-template" class="e-icon-settings"> Регистрация нового пользователя </div>
          </ng-template>
          <ng-template #content>
            <div class="dialogContent dialog-content-container" fxLayout="column" fxLayoutAlign="stretch" fxFlex="auto">
              <perfect-scrollbar class="scroll-container" fxFlex="auto">
                <label>
                  <span>Логин</span>
                  <input type="text" formControlName="userLogin" name="userLogin" class="form-control" id="userLogin" aria-describedby="idHelp" placeholder="Не выбрано" (change)="clearValidatorCreateForm()" [ngClass]="{ 'is-invalid': createSubmittedForm && getCreateForm.userLogin.errors }">
                  <div *ngIf="createSubmittedForm && getCreateForm.userLogin.errors" class="invalid-feedback">
                    <div *ngIf="getCreateForm.userLogin.errors.required">Поле обязательное для заполнения</div>
                  </div>
                </label>
                <label>
                  <span>Email</span>
                  <input type="text" formControlName="merchantId" name="merchantId" class="form-control" id="merchantId" aria-describedby="idHelp" placeholder="Не выбрано" (change)="clearValidatorCreateForm()" [ngClass]="{ 'is-invalid': createSubmittedForm && getCreateForm.merchantId.errors }">
                  <div *ngIf="createSubmittedForm && getCreateForm.merchantId.errors" class="invalid-feedback">
                    <div *ngIf="getCreateForm.merchantId.errors.required">Поле обязательное для заполнения</div>
                  </div>
                </label>
                <label>
                  <span>Моб. телефон</span>
                  <input type="text" formControlName="phoneNumber" name="phoneNumber" class="form-control" id="phoneNumber" aria-describedby="idHelp" placeholder="Не выбрано" (change)="clearValidatorCreateForm()" [ngClass]="{ 'is-invalid': createSubmittedForm && getCreateForm.phoneNumber.errors }">
                  <div *ngIf="createSubmittedForm && getCreateForm.phoneNumber.errors" class="invalid-feedback">
                    <div *ngIf="getCreateForm.phoneNumber.errors.pattern">Допустимый формат [+91 036 123-45-67 || 910361234567]</div>
                  </div>
                </label>
                <label>
                  <span>Пароль</span>
                  <input type="password" formControlName="userPassword" name="userPassword" class="form-control" id="userPassword" aria-describedby="idHelp" placeholder="Не выбрано" (change)="clearValidatorCreateForm()" [ngClass]="{ 'is-invalid': createSubmittedForm && getCreateForm.userPassword.errors }">
                  <div *ngIf="createSubmittedForm && getCreateForm.userPassword.errors" class="invalid-feedback">
                    <div *ngIf="getCreateForm.userPassword.errors.required">Поле обязательное для заполнения</div>
                    <div *ngIf="getCreateForm.userPassword.errors.minlength">Пароль должен содержать не меньше 6 символов</div>
                  </div>
                </label>
                <label>
                  <span>Подтвердить пароль</span>
                  <input type="password" formControlName="confirmUserPassword" name="confirmUserPassword" class="form-control" id="confirmUserPassword" aria-describedby="idHelp" placeholder="Не выбрано" (change)="clearValidatorCreateForm()" [ngClass]="{ 'is-invalid': createSubmittedForm && getCreateForm.confirmUserPassword.errors }">
                  <div *ngIf="createSubmittedForm && getCreateForm.confirmUserPassword.errors" class="invalid-feedback">
                    <div *ngIf="getCreateForm.confirmUserPassword.errors.required">Поле обязательное для заполнения</div>
                    <div *ngIf="getCreateForm.confirmUserPassword.errors.mustMatch">Пароль не подтвержден</div>
                  </div>
                </label>
                <label>
                  <span>Имя</span>
                  <input type="text" formControlName="merchantName" name="merchantName" class="form-control" id="merchantName" aria-describedby="idHelp" placeholder="Не выбрано" (change)="clearValidatorCreateForm()" [ngClass]="{ 'is-invalid': createSubmittedForm && getCreateForm.merchantName.errors }">
                  <div *ngIf="createSubmittedForm && getCreateForm.merchantName.errors" class="invalid-feedback">
                    <div *ngIf="getCreateForm.merchantName.errors.required">Поле обязательное для заполнения</div>
                  </div>
                </label>
                <label>
                  <span>Фамилия</span>
                  <input type="text" formControlName="merchantLegalName" name="merchantLegalName" class="form-control" id="merchantLegalName" aria-describedby="idHelp" placeholder="Не выбрано" (change)="clearValidatorCreateForm()" [ngClass]="{ 'is-invalid': createSubmittedForm && getCreateForm.merchantLegalName.errors }">
                  <div *ngIf="createSubmittedForm && getCreateForm.merchantLegalName.errors" class="invalid-feedback">
                    <div *ngIf="getCreateForm.merchantLegalName.errors.required">Поле обязательное для заполнения</div>
                  </div>
                </label>
                <label>
                  <span>Роль</span>
                  <select formControlName="bankId" name="bankId" class="custom-select" id="bankId" aria-describedby="idHelp" style="width: 100%; padding: 8px;" (change)="clearValidatorCreateForm()" [ngClass]="{ 'is-invalid': createSubmittedForm && getCreateForm.bankId.errors }">
                    <option selected disabled value="" class="placeholder">Не выбрано</option>
                    <option *ngFor="let bank of banks" [ngValue]="bank.id" [selected]="">{{bank.id}}</option>
                  </select>
                  <div *ngIf="createSubmittedForm && getCreateForm.bankId.errors" class="invalid-feedback">
                    <div *ngIf="getCreateForm.bankId.errors.required">Поле обязательное для заполнения</div>
                  </div>
                </label>
              </perfect-scrollbar>
            </div>
          </ng-template>
          <ng-template #footerTemplate>
            <input type="submit" class="e-control e-btn e-primary sendButton" id="btnApplyCreate" (click)="stFilter.filter(btnFilter('id=&userLogin=&merchantId=&phoneNumber=&mcc=&merchantLocation=&merchantName=&startRegistrationDate=&endRegistrationDate='))" value="Сохранить" [disabled]="!isButtonSave">
            <input type="reset" class="e-control e-btn e-primary sendButton" id="btnCancelCreate" value="Отменить">
          </ng-template>
        </form>
      </ejs-dialog>
    </div>

    <div class="control-section" style="padding-bottom: 5px;">
      <ejs-dialog #edit id="edit"
                  style="display: none;"
                  [isModal]='isModalEdit'
                  [animationSettings]='animationSettings'
                  [showCloseIcon]='showCloseIcon'
                  [target]='".control-section"'
                  [width]='"435px"'
                  (open)="onEdit()"
                  (close)="offEdit()">
        <form [formGroup]="editForm">
          <ng-template #header>
            <div id="dlg-template" class="e-icon-settings" *ngIf="selectedRegistration!=null"> #{{ selectedRegistration.id }} </div>
            <div id="dlg-template" class="e-icon-settings" *ngIf="selectedRegistration==null"> </div>
          </ng-template>
          <ng-template #content>
            <div class="dialogContent dialog-content-container" fxLayout="column" fxLayoutAlign="stretch" fxFlex="auto">
              <perfect-scrollbar class="scroll-container" fxFlex="auto">
                <label>
                  <span>Логин</span>
                  <input type="text" formControlName="userLogin" name="userLogin" class="form-control" id="userLogin" aria-describedby="idHelp" placeholder="Не выбрано" (change)="clearValidatorCreateForm()" [ngClass]="{ 'is-invalid': createSubmittedForm && getCreateForm.userLogin.errors }">
                  <div *ngIf="createSubmittedForm && getCreateForm.userLogin.errors" class="invalid-feedback">
                    <div *ngIf="getCreateForm.userLogin.errors.required">Поле обязательное для заполнения</div>
                  </div>
                </label>
                <label>
                  <span>Email</span>
                  <input type="text" formControlName="merchantId" name="merchantId" class="form-control" id="merchantId" aria-describedby="idHelp" placeholder="Не выбрано" (change)="clearValidatorCreateForm()" [ngClass]="{ 'is-invalid': createSubmittedForm && getCreateForm.merchantId.errors }">
                  <div *ngIf="createSubmittedForm && getCreateForm.merchantId.errors" class="invalid-feedback">
                    <div *ngIf="getCreateForm.merchantId.errors.required">Поле обязательное для заполнения</div>
                  </div>
                </label>
                <label>
                  <span>Моб. телефон</span>
                  <input type="text" formControlName="phoneNumber" name="phoneNumber" class="form-control" id="phoneNumber" aria-describedby="idHelp" placeholder="Не выбрано" (change)="clearValidatorCreateForm()" [ngClass]="{ 'is-invalid': createSubmittedForm && getCreateForm.phoneNumber.errors }">
                  <div *ngIf="createSubmittedForm && getCreateForm.phoneNumber.errors" class="invalid-feedback">
                    <div *ngIf="getCreateForm.phoneNumber.errors.pattern">Допустимый формат [+91 036 123-45-67 || 910361234567]</div>
                  </div>
                </label>
                <label>
                  <span>Пароль</span>
                  <input type="password" formControlName="userPassword" name="userPassword" class="form-control" id="userPassword" aria-describedby="idHelp" placeholder="Не выбрано" (change)="clearValidatorCreateForm()" [ngClass]="{ 'is-invalid': createSubmittedForm && getCreateForm.userPassword.errors }">
                  <div *ngIf="createSubmittedForm && getCreateForm.userPassword.errors" class="invalid-feedback">
                    <div *ngIf="getCreateForm.userPassword.errors.required">Поле обязательное для заполнения</div>
                    <div *ngIf="getCreateForm.userPassword.errors.minlength">Пароль должен содержать не меньше 6 символов</div>
                  </div>
                </label>
                <label>
                  <span>Подтвердить пароль</span>
                  <input type="password" formControlName="confirmUserPassword" name="confirmUserPassword" class="form-control" id="confirmUserPassword" aria-describedby="idHelp" placeholder="Не выбрано" (change)="clearValidatorCreateForm()" [ngClass]="{ 'is-invalid': createSubmittedForm && getCreateForm.confirmUserPassword.errors }">
                  <div *ngIf="createSubmittedForm && getCreateForm.confirmUserPassword.errors" class="invalid-feedback">
                    <div *ngIf="getCreateForm.confirmUserPassword.errors.required">Поле обязательное для заполнения</div>
                    <div *ngIf="getCreateForm.confirmUserPassword.errors.mustMatch">Пароль не подтвержден</div>
                  </div>
                </label>
                <label>
                  <span>Имя</span>
                  <input type="text" formControlName="merchantName" name="merchantName" class="form-control" id="merchantName" aria-describedby="idHelp" placeholder="Не выбрано" (change)="clearValidatorCreateForm()" [ngClass]="{ 'is-invalid': createSubmittedForm && getCreateForm.merchantName.errors }">
                  <div *ngIf="createSubmittedForm && getCreateForm.merchantName.errors" class="invalid-feedback">
                    <div *ngIf="getCreateForm.merchantName.errors.required">Поле обязательное для заполнения</div>
                  </div>
                </label>
                <label>
                  <span>Фамилия</span>
                  <input type="text" formControlName="merchantLegalName" name="merchantLegalName" class="form-control" id="merchantLegalName" aria-describedby="idHelp" placeholder="Не выбрано" (change)="clearValidatorCreateForm()" [ngClass]="{ 'is-invalid': createSubmittedForm && getCreateForm.merchantLegalName.errors }">
                  <div *ngIf="createSubmittedForm && getCreateForm.merchantLegalName.errors" class="invalid-feedback">
                    <div *ngIf="getCreateForm.merchantLegalName.errors.required">Поле обязательное для заполнения</div>
                  </div>
                </label>
                <label>
                  <span>Роль</span>
                  <select formControlName="bankId" name="bankId" class="custom-select" id="bankId" aria-describedby="idHelp" style="width: 100%; padding: 8px;" (change)="clearValidatorCreateForm()" [ngClass]="{ 'is-invalid': createSubmittedForm && getCreateForm.bankId.errors }">
                    <option selected disabled value="" class="placeholder">Не выбрано</option>
                    <option *ngFor="let bank of banks" [ngValue]="bank.id" [selected]="">{{bank.id}}</option>
                  </select>
                  <div *ngIf="createSubmittedForm && getCreateForm.bankId.errors" class="invalid-feedback">
                    <div *ngIf="getCreateForm.bankId.errors.required">Поле обязательное для заполнения</div>
                  </div>
                </label>
              </perfect-scrollbar>
            </div>
          </ng-template>
          <ng-template #footerTemplate>
            <input type="submit" class="e-control e-btn e-primary sendButton" id="btnApplyEdit" (click)="stFilter.filter(btnFilter('id=&userLogin=&merchantId=&phoneNumber=&mcc=&merchantLocation=&merchantName=&startRegistrationDate=&endRegistrationDate='))" value="Сохранить" [disabled]="true">
            <input type="reset" class="e-control e-btn e-primary sendButton" id="btnCancelEdit" value="Отменить">
          </ng-template>
        </form>
      </ejs-dialog>
    </div>

    <div class="horizontal-container" fxLayout="column" fxLayoutAlign="stretch" fxFlex="auto">
      <perfect-scrollbar class="scroll-container" fxFlex="auto">

        <table class="table" border="1" style="border-bottom: solid #00275e 1px; width: 0;">
          <thead style="background-color: #00275e; border-color: #00275e; color: #fff; border-bottom: solid #00275e 3px; width: 0;">
          <tr>
            <th class="table-attestation-history">Регистрация пользователей {{ title }}</th>
          </tr>
          </thead>
          <tbody>
          <tr>
            <td>
              <div stTable #table="stTable" style="margin-top: -7px;">
                <div *ngIf="table.busy" class="loading-indicator">Loading ...</div>

                <table class="found">
                  <thead>
                  <tr>
                    <th stSort="userLogin">Логин</th>
                    <th stSort="merchantId">Email</th>
                    <th>Моб. телефон</th>
                    <th stSort="merchantName">Имя</th>
                    <th stSort="merchantLegalName">Фамилия</th>
                    <th>Роль</th>
                  </tr>
                  </thead>
                  <!-- http://www.unicode.org/cldr/charts/29/delta/ru.html -->
                  <!-- https://seo-studio.pro/blog/special-characters-html5-and-css3 -->
                  <tbody>
                  <ng-container *ngFor="let registration of table.items">
                  <tr (click)="selectRegistrationId(registration)" *ngIf="registration.id === selectedRegistrationId">
                    <td align="left" style="background: rgba(70, 70, 70, 0.200);" nowrap>{{ registration.userLogin }}</td>
                    <td align="left" style="background: rgba(70, 70, 70, 0.200);" nowrap>{{ registration.merchantId }}</td>
                    <td align="center" style="background: rgba(70, 70, 70, 0.200);" nowrap>{{ registration.phoneNumber }}</td>
                    <td align="left" style="background: rgba(70, 70, 70, 0.200);" nowrap>{{ registration.merchantName }}</td>
                    <td align="left" style="background: rgba(70, 70, 70, 0.200);" nowrap>{{ registration.merchantLegalName }}</td>
                    <td align="left" style="background: rgba(70, 70, 70, 0.200);" nowrap>{{ registration.terminalId | uppercase }}</td>
                  </tr>
                  <tr (click)="selectRegistrationId(registration)" *ngIf="registration.id != selectedRegistrationId">
                    <td align="left" nowrap>{{ registration.userLogin }}</td>
                    <td align="left" nowrap>{{ registration.merchantId }}</td>
                    <td align="center" nowrap>{{ registration.phoneNumber }}</td>
                    <td align="left" nowrap>{{ registration.merchantName }}</td>
                    <td align="left" nowrap>{{ registration.merchantLegalName }}</td>
                    <td align="left" nowrap>{{ registration.terminalId | uppercase }}</td>
                  </tr>
                  </ng-container>
                  </tbody>
                </table>

                <div stPagination #pager="stPagination" style="margin: auto; width: 200px;">
                  <button (click)="pager.selectPage(1)" [disabled]="!pager.isPreviousPageEnabled()" title="В начало">1</button>
                  <button (click)="pager.selectPreviousPage()" [disabled]="!pager.isPreviousPageEnabled()" title="Предыдущая">&#x25C4;</button>
                  <p style="margin-top: 17px;"><input type="text" value="{{pager.page}}" (input)="pager.selectPage(selectPage($event.target.value))" style="width: 75px; color: #00275e; border-color: #00275e; border-radius: 0.2em; padding-top: 0.1em; padding-bottom: 0.2em;"></p>
                  <button (click)="pager.selectNextPage()" [disabled]="!pager.isNextPageEnabled()" title="Следующая">&#x25BA;</button>
                  <button (click)="pager.selectPage(selectLastPage(pager.length, pager.size))" [disabled]="!pager.isNextPageEnabled()" title="В конец">{{ selectLastPage(pager.length, pager.size) }}</button>
                </div>
              </div>
            </td>
          </tr>
          </tbody>
        </table>

      </perfect-scrollbar>
    </div>

  </div>
  <!-- /Container: List Items -->
